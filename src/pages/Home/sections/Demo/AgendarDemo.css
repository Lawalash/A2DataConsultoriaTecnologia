/* src/pages/Home/sections/Demo/AgendarDemo.css
   Versão mobile responsiva: calendário otimizado, inputs melhorados, placeholders legíveis
*/

/* Fonte */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

:root {
  /* Cores principais baseadas no hero */
  --azul-escuro: #043959;
  --azul-medio: #466FA6;
  --azul-claro: #8EA3BF;
  --branco: #F2F2F2;

  /* texto primário / secundário */
  --text-primary: var(--branco);
  --text-secondary: rgba(242, 242, 242, 0.85);
  --text-muted: rgba(242, 242, 242, 0.6);

  /* fundos e glass */
  --bg-glass: rgba(242, 242, 242, 0.03);
  --bg-glass-hover: rgba(242, 242, 242, 0.06);
  --border-glass: rgba(142, 163, 191, 0.12);

  /* acentos e feedback */
  --accent-primary: linear-gradient(135deg, var(--azul-medio) 0%, var(--azul-claro) 100%);
  --accent-secondary: rgba(142, 163, 191, 0.15);
  --error: #ff6b6b;
  --success: #51cf66;

  /* sombras e transições */
  --shadow-sm: 0 2px 8px rgba(4, 57, 89, 0.06);
  --shadow-md: 0 8px 32px rgba(4, 57, 89, 0.12);
  --shadow-lg: 0 20px 60px rgba(4, 57, 89, 0.22);
  --shadow-accent: 0 12px 40px rgba(70, 111, 166, 0.24);

  --transition-base: all 0.28s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-bounce: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);

  /* espaçamentos */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
  --spacing-2xl: 48px;

  /* radius */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;

  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
}

/* Reset e preferências de movimento */
* { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
}

/* Página base */
.agendar-page {
  min-height: 100vh;
  background: linear-gradient(135deg, rgba(4,57,89,0.95) 0%, rgba(70,111,166,0.9) 50%, rgba(142,163,191,0.85) 100%), url("https://images.unsplash.com/photo-1504384308090-c894fdcc538d?auto=format&fit=crop&w=1920&q=80") center/cover no-repeat fixed;
  color: var(--text-primary);
  padding: var(--spacing-lg);
  position: relative;
  overflow-x: hidden;
  -webkit-font-smoothing:antialiased;
}

/* overlay */
.agendar-page::before {
  content: '';
  position: fixed; inset: 0;
  background: linear-gradient(180deg, rgba(4,57,89,0.62), rgba(4,57,89,0.48));
  z-index: 0;
}

/* Topbar */
.topbar {
  max-width: 1400px;
  margin: 0 auto var(--spacing-xl);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--spacing-md);
  position: relative;
  z-index: 10;
  backdrop-filter: blur(12px);
  background: rgba(4, 57, 89, 0.08);
  border: 1px solid var(--border-glass);
  border-radius: var(--radius-lg);
  padding: var(--spacing-md) var(--spacing-lg);
  box-shadow: var(--shadow-md);
}

/* back button */
.back-btn {
  width: 48px; height: 48px;
  border-radius: var(--radius-md);
  display: flex; align-items: center; justify-content: center;
  background: var(--bg-glass); border: 1px solid var(--border-glass);
  color: var(--text-primary); cursor: pointer;
  transition: var(--transition-base); backdrop-filter: blur(8px);
}
.back-btn:hover { transform: translateY(-3px); background: var(--bg-glass-hover); box-shadow: var(--shadow-sm); }

/* title */
.title {
  font-size: 1.25rem; font-weight: 700;
  background: linear-gradient(135deg, var(--branco) 0%, var(--azul-claro) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text; color: transparent;
}

/* Draft actions */
.draft-actions { display:flex; gap:var(--spacing-sm); }
.btn-draft {
  padding: 8px 12px; border-radius: 10px;
  background: var(--bg-glass); border:1px solid var(--border-glass);
  color: var(--azul-claro); cursor:pointer; font-weight:600;
  transition: var(--transition-base); backdrop-filter: blur(8px);
}
.btn-draft.clear { color: var(--error); border-color: rgba(255,107,107,0.18); }
.btn-draft:hover { transform: translateY(-2px); background: var(--bg-glass-hover); }

/* Grid principal */
.content-grid {
  max-width: 1400px; margin: 0 auto;
  display: grid; grid-template-columns: 350px 1fr; gap: var(--spacing-2xl);
  align-items: start; position: relative; z-index: 5;
}

/* Side nav */
.side-nav {
  background: rgba(255,255,255,0.02); border:1px solid var(--border-glass);
  border-radius: var(--radius-xl); padding: var(--spacing-lg);
  backdrop-filter: blur(16px); box-shadow: var(--shadow-lg); position: sticky; top: var(--spacing-lg);
}
.side-steps { list-style:none; display:flex; flex-direction:column; gap:var(--spacing-sm); margin-bottom:var(--spacing-lg); }
.side-step { display:block; }
.side-step-btn {
  width:100%; display:flex; gap:var(--spacing-md); align-items:center;
  padding: var(--spacing-md); border-radius: var(--radius-md); background: transparent;
  border: 1px solid transparent; color: var(--text-primary); text-align:left; cursor:pointer;
  transition: var(--transition-base); font-weight:600;
}
.side-step-btn:hover:not([disabled]) { background: var(--bg-glass-hover); border-color: var(--border-glass); transform: translateX(4px); }
.side-step-btn[disabled] { opacity:0.6; cursor:not-allowed; }
.side-step-index {
  width:40px; height:40px; border-radius: var(--radius-md);
  display:flex; align-items:center; justify-content:center;
  background: var(--bg-glass); color: var(--text-secondary); font-weight:700; font-size:0.95rem;
  border:1px solid var(--border-glass); transition: var(--transition-base);
}
.side-step-title { font-size:0.95rem; line-height:1.3; }

/* Estado ativo */
.side-step.active .side-step-btn { background: var(--accent-secondary); border-color: var(--azul-claro); }
.side-step.active .side-step-index { background: var(--accent-primary); color: var(--branco); box-shadow: var(--shadow-accent); }

/* Estado concluído — discreto */
.side-step.done .side-step-index {
  background: transparent;
  color: var(--text-muted);
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow: none;
  opacity: 0.9;
}

/* barra de progresso */
.side-progress { display:flex; flex-direction:column; gap:var(--spacing-sm); }
.progress-bar { height:8px; background: rgba(255,255,255,0.02); border-radius:999px; overflow:hidden; }
.progress-fill {
  height:100%; background: linear-gradient(90deg, var(--azul-medio), var(--azul-claro));
  border-radius:999px; transition: width 0.45s cubic-bezier(0.4,0,0.2,1);
  position: relative; overflow:hidden;
}
.progress-fill::after {
  content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.18), transparent);
  animation: shimmer 2s infinite;
}
@keyframes shimmer { 0%{left:-100%} 100%{left:100%} }
.progress-label { font-size:0.85rem; color:var(--text-muted); text-align:center; font-weight:600; }

/* Painel */
.panel-wrap { display:flex; flex-direction:column; gap:var(--spacing-md); }
.panel {
  background: rgba(255,255,255,0.02); border-radius: var(--radius-xl);
  padding: var(--spacing-2xl); border:1px solid var(--border-glass);
  min-height: 500px; backdrop-filter: blur(20px); box-shadow: var(--shadow-lg);
  position: relative; overflow: hidden;
}

/* hover sheen */
.panel::before {
  content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
  background: linear-gradient(90deg, transparent, rgba(142,163,191,0.03), transparent);
  transition:left 0.6s ease; z-index:1;
}
.panel:hover::before { left:100%; }
.panel-exit { animation: panelExit .2s ease forwards; }
.panel-enter { animation: panelEnter .28s ease forwards; }
@keyframes panelExit { to { transform: translateY(-10px) scale(.995); opacity:0; } }
@keyframes panelEnter { from { transform: translateY(10px) scale(.995); opacity:0; } to { transform: translateY(0); opacity:1; } }

/* conteudo step */
.step { position: relative; z-index:2; }
.step h2 {
  margin:0 0 var(--spacing-sm) 0; font-size:1.5rem; font-weight:700;
  background: linear-gradient(135deg, var(--branco) 0%, var(--azul-claro) 100%);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; color:transparent;
}
.muted { color: var(--text-secondary); font-size:0.95rem; margin-bottom:var(--spacing-md); line-height:1.5; }

/* CHIPS */
.chips {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: var(--spacing-md);
  margin-top: var(--spacing-md);
}

.chip {
  padding: var(--spacing-md) var(--spacing-lg);
  border-radius: var(--radius-md);
  background: var(--bg-glass);
  border: 1px solid var(--border-glass);
  color: var(--text-primary);
  cursor: pointer;
  transition: var(--transition-bounce);
  text-align: center;
  font-weight: 600;
  backdrop-filter: blur(10px);
  position: relative;
  overflow: hidden;
}
.chip:hover { transform: translateY(-2px); background: var(--bg-glass-hover); box-shadow: var(--shadow-md); }
.chip.selected { background: var(--accent-primary); color: var(--branco); border-color: transparent; box-shadow: var(--shadow-accent); }

/* Radio group moderno */
.radio-group {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: var(--spacing-md);
  margin-top: var(--spacing-md);
}
.radio-item {
  display:flex; align-items:center; gap:var(--spacing-sm);
  padding: var(--spacing-md); background: var(--bg-glass); border-radius:var(--radius-md);
  border:1px solid var(--border-glass); cursor:pointer; transition:var(--transition-base); backdrop-filter: blur(8px);
}
.radio-item:hover { transform: translateY(-1px); background: var(--bg-glass-hover); }
.radio-item:has(input:checked) { background: var(--accent-secondary); border-color: var(--azul-claro); }

/* FORM / INPUTS */
.form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--spacing-lg);
  margin-top: var(--spacing-md);
}

.field { display:flex; flex-direction:column; gap:var(--spacing-sm); }
.field-full { grid-column: 1 / -1; }
.field > span { font-weight:600; color:var(--text-primary); font-size:0.95rem; }

/* inputs: padding maior, borda sutil, foco mais claro */
textarea,
input[type="text"],
input[type="email"],
input[type="tel"],
input[type="date"],
select {
  padding: 14px; border-radius: 12px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border: 1px solid var(--border-glass);
  color: var(--text-primary);
  font-size: 0.96rem;
  transition: var(--transition-base);
  backdrop-filter: blur(8px);
  box-shadow: 0 6px 18px rgba(0,0,0,0.14);
}

/* foco */
textarea:focus, input:focus, select:focus {
  outline: none; border-color: var(--azul-claro); box-shadow: 0 0 0 6px rgba(142,163,191,0.06);
  transform: translateY(-2px);
}

/* Placeholder mais legível */
textarea::placeholder, input::placeholder { 
  color: rgba(242, 242, 242, 0.75); 
  font-size: 0.95rem;
}

/* Problema Principal — campo maior */
.step textarea,
.textarea,
textarea {
  min-height: 170px;
  resize: vertical;
  line-height: 1.5;
  font-size: 1rem;
  padding: 16px;
}

/* SELECT: mostrar texto preto nas opções e no controle selecionado */
select, select:focus {
  color: #111;
  background: #ffffff;
  border-radius: 10px;
  padding-right: 32px;
}
select option { color: #111; background: #fff; }

/* SERVIÇOS (cards) */
.services-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--spacing-md);
  margin-top: var(--spacing-md);
}
.service-card {
  padding: var(--spacing-lg);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-glass);
  background: var(--bg-glass);
  cursor: pointer;
  transition: var(--transition-bounce);
  position: relative; overflow:hidden;
}
.service-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); }
.service-card.checked { background: var(--accent-secondary); border-color: var(--azul-claro); box-shadow: var(--shadow-accent); transform: translateY(-2px); }
.service-top { display:flex; justify-content:space-between; gap:var(--spacing-sm); margin-bottom:var(--spacing-sm); }
.service-top strong { font-weight:600; color:var(--text-primary); }
.service-badge { background: var(--azul-medio); color: var(--branco); padding:6px 10px; border-radius:999px; font-weight:700; font-size:0.78rem; }
.service-desc { color: var(--text-secondary); font-size:0.92rem; line-height:1.35; }

/* SCHEDULER */
.scheduler { 
  display: flex; 
  flex-direction: column; 
  gap: var(--spacing-xl); 
  margin-top: var(--spacing-md); 
}

.scheduler-section { 
  display: flex; 
  flex-direction: column; 
  gap: var(--spacing-md); 
}

.scheduler-section h4 {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--azul-claro);
  margin: 0;
}

/* tipo de reunião chips */
.meeting-type { 
  display: flex; 
  gap: var(--spacing-md); 
  align-items: center; 
}
.type-chip {
  display: flex; 
  gap: var(--spacing-sm); 
  align-items: center; 
  padding: 12px 16px;
  border-radius: 12px; 
  background: var(--bg-glass); 
  border: 1px solid var(--border-glass);
  cursor: pointer; 
  transition: var(--transition-base); 
  font-weight: 600; 
  backdrop-filter: blur(8px);
}
.type-chip.active { 
  background: var(--accent-secondary); 
  border-color: var(--azul-claro); 
  box-shadow: var(--shadow-sm); 
}
.type-chip input { display: none; }

/* MODERN CALENDAR - Otimizado para mobile */
.modern-calendar {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid var(--border-glass);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  backdrop-filter: blur(12px);
  box-shadow: var(--shadow-md);
  max-width: 420px;
  margin: 0 auto;
  width: 100%;
}

.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-lg);
  padding: 0 var(--spacing-sm);
}

.nav-button {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-md);
  background: var(--bg-glass);
  border: 1px solid var(--border-glass);
  color: var(--text-primary);
  cursor: pointer;
  transition: var(--transition-base);
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(8px);
}

.nav-button:hover {
  background: var(--bg-glass-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

.month-year h3 {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
  text-align: center;
  min-width: 200px;
}

.calendar-weekdays {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: var(--spacing-xs);
  margin-bottom: var(--spacing-md);
  padding: 0 var(--spacing-xs);
}

.weekday {
  padding: var(--spacing-sm);
  text-align: center;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: var(--spacing-xs);
  padding: 0 var(--spacing-xs);
}

.calendar-day {
  aspect-ratio: 1;
  border: 1px solid transparent;
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--text-primary);
  cursor: pointer;
  transition: var(--transition-base);
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 500;
  min-height: 44px;
}

.calendar-day:hover:not(.disabled) {
  background: var(--bg-glass-hover);
  border-color: var(--border-glass);
  transform: translateY(-1px);
}

.calendar-day.other-month {
  color: var(--text-muted);
  opacity: 0.4;
}

.calendar-day.disabled {
  color: var(--text-muted);
  opacity: 0.3;
  cursor: not-allowed;
  background: rgba(255, 255, 255, 0.005);
}

.calendar-day.today {
  background: linear-gradient(135deg, rgba(70, 111, 166, 0.2), rgba(142, 163, 191, 0.2));
  border-color: var(--azul-claro);
  font-weight: 700;
  position: relative;
}

.calendar-day.selected {
  background: var(--accent-primary);
  color: var(--branco);
  border-color: transparent;
  box-shadow: var(--shadow-accent);
  transform: translateY(-2px);
  font-weight: 700;
}

.calendar-day.selected:hover {
  transform: translateY(-2px);
}

.day-number {
  position: relative;
  z-index: 2;
}

.today-indicator {
  position: absolute;
  bottom: 4px;
  left: 50%;
  transform: translateX(-50%);
  width: 4px;
  height: 4px;
  background: var(--azul-claro);
  border-radius: 50%;
  z-index: 1;
}

.calendar-day.selected .today-indicator {
  background: var(--branco);
}

.calendar-note {
  margin-top: var(--spacing-md);
  padding: var(--spacing-sm);
  background: rgba(255, 107, 107, 0.08);
  border: 1px solid rgba(255, 107, 107, 0.15);
  border-radius: var(--radius-sm);
  text-align: center;
}

.calendar-note small {
  color: var(--text-secondary);
  font-size: 0.85rem;
}

/* SLOTS DE TEMPO */
.time-slots-grid { 
  display: grid; 
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); 
  gap: var(--spacing-sm); 
}

.no-slots {
  grid-column: 1 / -1;
  text-align: center;
  color: var(--text-muted);
  padding: var(--spacing-lg);
  font-style: italic;
}

.time-slot {
  padding: var(--spacing-md); 
  border-radius: 12px; 
  background: var(--bg-glass);
  border: 1px solid var(--border-glass); 
  cursor: pointer;
  display: flex; 
  align-items: center; 
  justify-content: center; 
  gap: var(--spacing-sm);
  transition: var(--transition-base); 
  font-weight: 700;
  color: var(--branco) !important;
}

.time-slot svg, 
.time-slot .icon { 
  color: var(--branco) !important; 
}

.time-slot:hover { 
  transform: translateY(-1px); 
  background: var(--bg-glass-hover); 
  box-shadow: var(--shadow-sm); 
}

.time-slot.selected {
  background: linear-gradient(90deg, var(--azul-medio), var(--azul-claro));
  color: var(--branco) !important; 
  border-color: transparent; 
  box-shadow: var(--shadow-accent); 
  transform: translateY(-2px);
}

/* RESUMO / CARTÕES */
.summary { 
  display: flex; 
  flex-direction: column; 
  gap: var(--spacing-lg); 
  margin-top: var(--spacing-md); 
}

.summary-row { 
  display: grid; 
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
  gap: var(--spacing-lg); 
}

.summary-card {
  padding: var(--spacing-lg); 
  border-radius: var(--radius-lg);
  background: var(--bg-glass); 
  border: 1px solid var(--border-glass); 
  backdrop-filter: blur(10px);
  position: relative; 
  overflow: hidden;
}

.summary-card::before { 
  content: ''; 
  position: absolute; 
  left: 0; 
  top: 0; 
  width: 4px; 
  height: 100%; 
  background: linear-gradient(180deg, var(--azul-medio), var(--azul-claro)); 
}

.summary-card h4 { 
  margin-bottom: var(--spacing-sm); 
  font-weight: 600; 
  color: var(--azul-claro); 
  font-size: 1rem; 
}

.summary-card p { 
  margin-bottom: var(--spacing-xs); 
  color: var(--text-secondary); 
  line-height: 1.4; 
  font-size: 0.95rem; 
}

.summary-card p strong { 
  color: var(--text-primary); 
  font-weight: 700; 
}

/* link editar */
.link-edit { 
  margin-top: var(--spacing-md); 
  background: transparent; 
  border: 1px solid var(--azul-claro); 
  color: var(--azul-claro); 
  padding: 8px 12px; 
  border-radius: 8px; 
  cursor: pointer; 
  font-weight: 600; 
}

.link-edit:hover { 
  background: var(--accent-secondary); 
  transform: translateY(-1px); 
}

/* notas do resumo */
.summary-notes { 
  padding: var(--spacing-lg); 
  border-radius: var(--radius-lg); 
  background: var(--bg-glass); 
  border: 1px solid var(--border-glass); 
}

/* AÇÕES FINAIS e BOTOES */
.final-actions { 
  margin-top: var(--spacing-xl); 
  display: flex; 
  flex-direction: column; 
  align-items: center; 
  gap: var(--spacing-md); 
  text-align: center; 
}

.btn { 
  padding: var(--spacing-md) var(--spacing-xl); 
  border-radius: var(--radius-md); 
  font-weight: 700; 
  cursor: pointer; 
  border: none; 
  font-size: 1rem; 
  transition: var(--transition-bounce); 
  display: inline-flex; 
  align-items: center; 
  gap: var(--spacing-sm); 
  position: relative; 
  overflow: hidden; 
}

.btn::before { 
  content: ''; 
  position: absolute; 
  top: 0; 
  left: -100%; 
  width: 100%; 
  height: 100%; 
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.12), transparent); 
  transition: left 0.5s; 
}

.btn:hover::before { 
  left: 100%; 
}

.btn-primary { 
  background: linear-gradient(90deg, var(--azul-medio), var(--azul-claro)); 
  color: var(--branco); 
  box-shadow: var(--shadow-accent); 
}

.btn-primary:hover { 
  transform: translateY(-3px); 
  box-shadow: 0 22px 70px rgba(70,111,166,0.32); 
}

.btn-primary.sending { 
  opacity: 0.8; 
  pointer-events: none; 
}

.btn-ghost { 
  background: transparent; 
  color: var(--text-primary); 
  border: 1px solid var(--border-glass); 
  padding: 10px 14px; 
  border-radius: 10px; 
}

.btn-ghost:hover { 
  background: var(--bg-glass-hover); 
  transform: translateY(-1px); 
}

/* FOOTER CONTROLS */
.panel-footer {
  display: flex; 
  justify-content: space-between; 
  align-items: center; 
  gap: var(--spacing-md); 
  margin-top: var(--spacing-lg);
  border-top: 1px solid var(--border-glass); 
  padding-top: var(--spacing-lg); 
  position: relative; 
  z-index: 2;
}

.footer-left, 
.footer-right { 
  display: flex; 
  gap: var(--spacing-sm); 
}

/* ERROS & FOCO */
.field-error { 
  color: var(--error); 
  font-size: 0.9rem; 
  margin-top: var(--spacing-xs); 
  display: flex; 
  align-items: center; 
  gap: 6px; 
  font-weight: 600; 
}

.field-error::before { 
  content: '⚠'; 
  font-size: 0.95rem; 
}

input[aria-invalid="true"], 
textarea[aria-invalid="true"], 
select[aria-invalid="true"] {
  border-color: var(--error);
  box-shadow: 0 0 0 6px rgba(255,107,107,0.08);
}

/* foco visível */
*:focus { 
  outline: 3px solid rgba(142,163,191,0.12); 
  outline-offset: 2px; 
}

/* ============================================================================ */
/* RESPONSIVIDADE MOBILE - OTIMIZADA */
/* ============================================================================ */

/* Tablets grandes */
@media (max-width: 1200px) {
  .content-grid { 
    grid-template-columns: 300px 1fr; 
    gap: var(--spacing-xl); 
    padding: 0 12px; 
  }
  .summary-row { 
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
  }
}

/* Tablets */
@media (max-width: 1024px) {
  .agendar-page {
    padding: var(--spacing-md);
  }
  
  .topbar { 
    flex-wrap: wrap;
    gap: var(--spacing-sm); 
    padding: var(--spacing-md); 
    margin-bottom: var(--spacing-lg);
  }
  
  .topbar-left { 
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    flex: 1;
  }
  
  .topbar-right {
    order: 2;
    width: 100%;
    justify-content: center;
  }
  
  .content-grid { 
    grid-template-columns: 1fr; 
    gap: var(--spacing-lg); 
  }
  
  .side-nav { 
    order: 2; 
    position: static; 
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
  }
  
  .side-steps { 
    flex-direction: row; 
    gap: var(--spacing-sm); 
    overflow-x: auto; 
    padding: var(--spacing-sm) 0;
    -webkit-overflow-scrolling: touch;
  }
  
  .side-step { 
    min-width: 120px; 
  }
  
  .side-step-btn { 
    flex-direction: column; 
    padding: var(--spacing-md) var(--spacing-sm); 
    gap: var(--spacing-xs); 
    text-align: center;
  }
  
  .side-step-index {
    width: 32px;
    height: 32px;
    font-size: 0.9rem;
  }
  
  .side-step-title { 
    font-size: 0.8rem; 
    text-align: center; 
    line-height: 1.2;
    hyphens: auto;
  }
  
  .panel { 
    padding: var(--spacing-lg); 
    min-height: auto; 
    order: 1;
  }
  
  .summary-row { 
    grid-template-columns: 1fr; 
  }
  
  .form-grid { 
    grid-template-columns: 1fr; 
    gap: var(--spacing-md);
  }
  
  .chips { 
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); 
  }
  
  .services-grid {
    grid-template-columns: 1fr;
  }
  
  .modern-calendar {
    max-width: 100%;
    padding: var(--spacing-md);
  }
  
  .time-slots-grid { 
    grid-template-columns: repeat(auto-fit, minmax(110px, 1fr)); 
  }
}

/* Mobile - Ajustes principais */
@media (max-width: 768px) {
  .agendar-page { 
    padding: var(--spacing-sm); 
    background-attachment: scroll; /* Melhora performance mobile */
  }
  
  .topbar {
    flex-direction: column;
    align-items: stretch;
    text-align: center;
    padding: var(--spacing-md) var(--spacing-sm);
    margin-bottom: var(--spacing-md);
  }
  
  .topbar-left {
    justify-content: center;
    width: 100%;
    margin-bottom: var(--spacing-sm);
  }
  
  .title { 
    font-size: 1.1rem; 
    line-height: 1.3;
  }
  
  .panel { 
    padding: var(--spacing-md); 
    border-radius: var(--radius-md);
  }
  
  .step h2 { 
    font-size: 1.3rem; 
    line-height: 1.2;
  }
  
  .muted {
    font-size: 0.9rem;
  }
  
  /* Chips mobile otimizado */
  .chips { 
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-sm); 
  }
  
  .chip {
    padding: var(--spacing-sm) var(--spacing-md);
    font-size: 0.9rem;
  }
  
  /* Radio group mobile */
  .radio-group {
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
  }
  
  .radio-item {
    padding: var(--spacing-sm) var(--spacing-md);
  }
  
  /* Textarea mobile */
  textarea, .textarea {
    min-height: 150px;
    font-size: 16px; /* Evita zoom no iOS */
  }
  
  /* Inputs mobile */
  input, select {
    font-size: 16px; /* Evita zoom no iOS */
    padding: 12px;
  }
  
  /* Placeholder mobile */
  textarea::placeholder, input::placeholder { 
    font-size: 15px;
  }
  
  /* Services grid mobile */
  .services-grid {
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
  }
  
  .service-card {
    padding: var(--spacing-md);
  }
  
  /* Calendar mobile otimizado */
  .modern-calendar {
    padding: var(--spacing-sm);
    border-radius: var(--radius-md);
  }
  
  .calendar-header {
    margin-bottom: var(--spacing-md);
  }
  
  .month-year h3 {
    font-size: 1rem;
    min-width: 140px;
  }
  
  .nav-button {
    width: 36px;
    height: 36px;
  }
  
  .calendar-grid {
    gap: 2px;
  }
  
  .calendar-day {
    min-height: 40px;
    font-size: 0.9rem;
    border-radius: 6px;
  }
  
  .weekday {
    font-size: 0.75rem;
    padding: var(--spacing-xs);
  }
  
  /* Time slots mobile */
  .time-slots-grid { 
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-xs);
  }
  
  .time-slot {
    padding: var(--spacing-sm);
    font-size: 0.9rem;
    border-radius: 8px;
  }
  
  /* Meeting type mobile */
  .meeting-type {
    flex-direction: column;
    gap: var(--spacing-sm);
  }
  
  .type-chip {
    width: 100%;
    justify-content: center;
    padding: var(--spacing-md);
  }
  
  /* Footer mobile */
  .panel-footer { 
    flex-direction: column-reverse; 
    gap: var(--spacing-md); 
    align-items: stretch; 
  }
  
  .footer-left,
  .footer-right {
    justify-content: center;
  }
  
  .btn { 
    width: 100%;
    max-width: none;
    padding: var(--spacing-md);
    font-size: 1rem;
  }
  
  .final-actions .btn { 
    max-width: 100%;
  }
}

/* Mobile pequeno - Ajustes extras */
@media (max-width: 480px) {
  .agendar-page { 
    padding: var(--spacing-xs); 
  }
  
  .topbar {
    padding: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
  }
  
  .title { 
    font-size: 1rem; 
    line-height: 1.4;
  }
  
  .back-btn {
    width: 40px;
    height: 40px;
  }
  
  /* Side nav compacto */
  .side-nav {
    padding: var(--spacing-sm);
  }
  
  .side-step-btn {
    padding: var(--spacing-sm);
    gap: 4px;
  }
  
  .side-step-index { 
    width: 28px; 
    height: 28px; 
    font-size: 0.8rem; 
  }
  
  .side-step-title {
    font-size: 0.7rem;
    line-height: 1.1;
  }
  
  .panel { 
    padding: var(--spacing-sm); 
  }
  
  .step h2 {
    font-size: 1.2rem;
  }
  
  /* Chips ultra compactos */
  .chips { 
    grid-template-columns: 1fr 1fr; 
    gap: var(--spacing-xs); 
  }
  
  .chip {
    padding: var(--spacing-xs) var(--spacing-sm);
    font-size: 0.85rem;
  }
  
  /* Calendar ultra compacto */
  .modern-calendar {
    padding: var(--spacing-xs);
  }
  
  .calendar-header {
    margin-bottom: var(--spacing-sm);
  }
  
  .month-year h3 {
    font-size: 0.9rem;
    min-width: 120px;
  }
  
  .nav-button {
    width: 32px;
    height: 32px;
  }
  
  .calendar-day {
    min-height: 36px;
    font-size: 0.8rem;
  }
  
  .weekday {
    font-size: 0.7rem;
    padding: 2px;
  }
  
  /* Time slots ultra compactos */
  .time-slots-grid { 
    grid-template-columns: repeat(2, 1fr);
  }
  
  .time-slot { 
    padding: var(--spacing-xs); 
    font-size: 0.85rem; 
    gap: 4px; 
  }
  
  /* Inputs compactos */
  input, select, textarea {
    padding: 10px;
    font-size: 16px;
  }
  
  textarea {
    min-height: 120px;
  }
  
  /* Botões compactos */
  .btn { 
    padding: var(--spacing-sm) var(--spacing-md); 
    font-size: 0.9rem; 
  }
  
  .btn-draft { 
    padding: 6px var(--spacing-sm); 
    font-size: 0.8rem; 
  }
  
  /* Summary cards compactos */
  .summary-card {
    padding: var(--spacing-sm);
  }
  
  .link-edit {
    padding: 6px 10px;
    font-size: 0.85rem;
  }
}

/* Landscape mobile específico */
@media (max-width: 900px) and (orientation: landscape) and (max-height: 500px) {
  .agendar-page {
    padding: var(--spacing-xs);
  }
  
  .topbar {
    padding: var(--spacing-xs) var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
  }
  
  .content-grid {
    gap: var(--spacing-sm);
  }
  
  .side-nav {
    padding: var(--spacing-sm);
  }
  
  .side-steps {
    gap: var(--spacing-xs);
  }
  
  .panel {
    padding: var(--spacing-sm);
  }
  
  .modern-calendar {
    max-width: 350px;
    padding: var(--spacing-sm);
  }
  
  .calendar-day {
    min-height: 32px;
    font-size: 0.85rem;
  }
}

/* animações utilitárias */
.loading { 
  opacity: 0.65; 
  pointer-events: none; 
}

.bounce-in { 
  animation: bounceIn .48s cubic-bezier(0.68,-0.55,0.265,1.55); 
}

@keyframes bounceIn { 
  0% { 
    transform: scale(.3); 
    opacity: 0; 
  } 
  50% { 
    transform: scale(1.05); 
  } 
  70% { 
    transform: scale(.95); 
  } 
  100% { 
    transform: scale(1); 
    opacity: 1; 
  } 
}

.fade-in { 
  animation: fadeIn .28s ease-in-out; 
}

@keyframes fadeIn { 
  from {
    opacity: 0; 
    transform: translateY(6px);
  } 
  to {
    opacity: 1; 
    transform: translateY(0);
  } 
}

/* acessibilidade contrast/perfil */
@media (prefers-contrast: high) {
  :root { 
    --border-glass: rgba(142,163,191,0.28); 
    --bg-glass: rgba(242,242,242,0.05); 
    --bg-glass-hover: rgba(242,242,242,0.12); 
  }
}

/* impressão */
@media print {
  .agendar-page { 
    background: white; 
    color: black; 
  }
  .topbar, 
  .side-nav, 
  .panel-footer, 
  .btn, 
  .draft-actions { 
    display: none !important; 
  }
  .content-grid { 
    grid-template-columns: 1fr; 
  }
  .panel { 
    background: white; 
    border: 1px solid #ddd; 
    box-shadow: none; 
    color: black; 
  } 
}